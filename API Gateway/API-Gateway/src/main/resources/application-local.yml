server:
  port: 8080

spring:
  application:
    name: api-gateway
  cloud:
    gateway:
      routes:
       
        - id: notification-websocket
          uri: http://localhost:8108
          predicates:
            - Path=/ws/notifications/**
        
       
        - id: auth-service
          uri: http://localhost:8101
          predicates:
            - Path=/auth/**
          filters:
            - RewritePath=/auth/?(?<segment>.*), /api/v1/auth/$\{segment}
        
       
        - id: user-service
          uri: http://localhost:8102
          predicates:
            - Path=/users/**
          filters:
            - RewritePath=/users/?(?<segment>.*), /api/v1/users/$\{segment}
        
        - id: employee-service
          uri: http://localhost:8102
          predicates:
            - Path=/employees/**
          filters:
            - RewritePath=/employees/?(?<segment>.*), /api/v1/employees/$\{segment}
        
        - id: organization-service
          uri: http://localhost:8102
          predicates:
            - Path=/organizations/**
          filters:
            - RewritePath=/organizations/?(?<segment>.*), /api/v1/organizations/$\{segment}
        
        - id: team-service
          uri: http://localhost:8103
          predicates:
            - Path=/teams/**
          filters:
            - RewritePath=/teams/?(?<segment>.*), /api/v1/teams/$\{segment}
        
        - id: channel-service
          uri: http://localhost:8104
          predicates:
            - Path=/channels/**
          filters:
            - RewritePath=/channels/?(?<segment>.*), /api/v1/channels/$\{segment}
        
       
        - id: chat-service
          uri: http://localhost:8105
          predicates:
            - Path=/chat/**
          filters:
            - RewritePath=/chat/?(?<segment>.*), /api/v1/chat/$\{segment}
        
       
        - id: meeting-service
          uri: http://localhost:8106
          predicates:
            - Path=/meetings/**
          filters:
            - RewritePath=/meetings/?(?<segment>.*), /api/v1/meetings/$\{segment}
        
    
        - id: file-service
          uri: http://localhost:8107
          predicates:
            - Path=/files/**
          filters:
            - RewritePath=/files/?(?<segment>.*), /api/v1/files/$\{segment}
        
       
        - id: notification-service
          uri: http://localhost:8108
          predicates:
            - Path=/notifications/**
          filters:
            - RewritePath=/notifications/?(?<segment>.*), /api/v1/notifications/$\{segment}
        
       
        - id: task-service
          uri: http://localhost:8110
          predicates:
            - Path=/tasks/**
          filters:
            - RewritePath=/tasks/?(?<segment>.*), /api/v1/tasks/$\{segment}


jwt:
  secret: ${JWT_SECRET:DevBlockerSecretKeyForJWTTokenGeneration123456789012345678901234567890}
  expiration: ${JWT_EXPIRATION:86400000}

rate-limit:
  requests-per-minute: ${RATE_LIMIT_REQUESTS_PER_MINUTE:100}
  enabled: false

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: when-authorized
  prometheus:
    metrics:
      export:
        enabled: true

logging:
  level:
    root: ${LOG_LEVEL:INFO}
    org.springframework.cloud.gateway: ${LOG_LEVEL:INFO}
    com.connect.API.Gateway: ${LOG_LEVEL:INFO}
    reactor.netty: INFO
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level [%X{traceId:-},%X{spanId:-}] %logger{36} - %msg%n"

